<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hymnal App</title>
    
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="Hymnal">
    <meta name="theme-color" content="#0f172a">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Permanent Dark Theme */
        body { background-color: #0f172a; color: #f1f5f9; font-family: sans-serif; }
        #app { background-color: #0f172a; }
        
        /* List Cards */
        .card { 
            background-color: #1e293b; 
            border: 1px solid #334155; 
            color: #ffffff; 
            transition: all 0.2s;
        }
        .card:active { background-color: #334155; transform: scale(0.98); }
        .hymn-id { color: #818cf8; font-weight: bold; margin-right: 12px; }

        /* Paginated Verse View */
        .verse-container {
            min-height: 50vh;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            background: rgba(30, 41, 59, 0.5);
            border-radius: 20px;
            padding: 20px;
            margin: 20px 0;
            border: 1px solid #334155;
        }

        .lyrics-text { 
            white-space: pre-line; 
            font-family: 'Noto Serif SC', 'Georgia', serif; 
            line-height: 2.2; 
            font-size: 1.4rem;
            color: #ffffff !important;
            font-style: italic;
        }

        /* Navigation controls */
        .nav-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
        }

        .page-btn {
            background-color: #312e81;
            color: #e0e7ff;
            padding: 12px 24px;
            border-radius: 12px;
            font-weight: bold;
            border: 1px solid #4338ca;
        }
        
        .page-btn:disabled { opacity: 0.2; }

        .back-btn { color: #94a3b8; margin-bottom: 20px; display: block; }
        
        * { -webkit-tap-highlight-color: transparent; }
    </style>
</head>
<body>

    <div id="app" class="max-w-md mx-auto min-h-screen flex flex-col shadow-2xl">
        
        <header class="bg-indigo-950 text-white p-5 sticky top-0 z-20 shadow-xl border-b border-indigo-900">
            <h1 class="text-xl font-bold mb-4 text-indigo-200">True Jesus Church Hymnal</h1>
            <input type="text" id="searchBar" onkeyup="filterHymns()" placeholder="Search number or name..." 
                class="w-full p-4 rounded-xl bg-slate-900 text-white border border-slate-700 outline-none focus:ring-2 focus:ring-indigo-500 placeholder-slate-500">
        </header>

        <div id="listView" class="p-4 space-y-3">
            </div>

        <div id="detailView" class="hidden fixed inset-0 z-30 p-6 overflow-y-auto bg-slate-950">
            <button onclick="goBack()" class="back-btn text-lg">← Back to List</button>
            
            <h2 id="hymnTitle" class="text-center text-indigo-400 font-bold text-xl mb-4"></h2>
            
            <div class="verse-container">
                <div id="hymnLyrics" class="lyrics-text"></div>
            </div>

            <div class="nav-controls">
                <button id="prevBtn" class="page-btn" onclick="changeVerse(-1)">Previous</button>
                <span id="pageInfo" class="text-slate-500 text-sm">Verse 1 of 1</span>
                <button id="nextBtn" class="page-btn" onclick="changeVerse(1)">Next</button>
            </div>
            
            <div class="h-20"></div>
        </div>

    </div>

    <script>
        let currentHymnVerses = [];
        let currentVerseIndex = 0;

        // Your full hymn list (I included the first few, you can add all 310)
        const hymns = [
  {
    id: 225,
    title: "顺从圣灵",
    lyrics: "①圣灵的恩惠，我当祈求，宝贝的能力，在我里头；\nshèng líng de ēn huì, wǒ dāng qí qiú, bǎo bèi de néng lì, zài wǒ lǐ tóu;\n助我结灵果，促进灵修，生命活水长流。\nzhù wǒ jié líng guǒ, cù jìn líng xiū, shēng mìng huó shuǐ zhǎng liú.\n(副歌)乐哉，乐哉，必在天聚会！圣父家中 福祉最宝贵；\nlè zāi, lè zāi, bì zài tiān jù huì! shèng fù jiā zhōng fú zhǐ zuì bǎo guì;\n心中必清洁，再不犯罪，靠圣灵的恩惠。\nxīn zhōng bì qīng jié, zài bù fàn zuì, kào shèng líng de ēn huì.\n\n②圣灵的声音，我当恭闻，真神的旨意，我要依从；\nshèng líng de shēng yīn, wǒ dāng gōng wén, zhēn shén de zhǐ yì, wǒ yào yī cóng;\n忠勤事奉主，做成圣工，尽责任，不居功。\nzhōng qín shì fèng zhǔ, zuò chéng shèng gōng, jǐn zé rèn, bù jū gōng.\n(副歌)乐哉，乐哉，必在天聚会！圣父家中 福祉最宝贵；\nlè zāi, lè zāi, bì zài tiān jù huì! shèng fù jiā zhōng fú zhǐ zuì bǎo guì;\n心中必清洁，再不犯罪，靠圣灵的恩惠。\nxīn zhōng bì qīng jié, zài bù fàn zuì, kào shèng líng de ēn huì.\n\n③圣灵的感动，我不消灭，当我软弱时，祂必扶持；\nshèng líng de gǎn dòng, wǒ bù xiāo miè, dāng wǒ ruǎn ruò shí, tā bì fú chí;\n凡事遵真道，胜过世界，力量永不衰竭。\nfán shì zūn zhēn dào, shèng guò shì jiè, lì liàng yǒng bù shuāi jié.\n(副歌)乐哉，乐哉，必在天聚会！圣父家中 福祉最宝贵；\nlè zāi, lè zāi, bì zài tiān jù huì! shèng fù jiā zhōng fú zhǐ zuì bǎo guì;\n心中必清洁，再不犯罪，靠圣灵的恩惠。\nxīn zhōng bì qīng jié, zài bù fàn zuì, kào shèng líng de ēn huì.\n\n④圣灵的引导，我要顺从，肉体的情欲，我必除净；\nshèng líng de yǐn dǎo, wǒ yào shùn cóng, ròu tǐ de qíng yù, wǒ bì chú jìng;\n常攻克己身，叫身服我，做主圣洁器皿。\ncháng gōng kè jǐ shēn, jiào shēn fú wǒ, zuò zhǔ shèng jié qì mǐn.\n(副歌)乐哉，乐哉，必在天聚会！圣父家中 福祉最宝贵；\nlè zāi, lè zāi, bì zài tiān jù huì! shèng fù jiā zhōng fú zhǐ zuì bǎo guì;\n心中必清洁，再不犯罪，靠圣灵的恩惠。\nxīn zhōng bì qīng jié, zài bù fàn zuì, kào shèng líng de ēn huì。"
  },
  {
    id: 279,
    title: "敞开恩门",
    lyrics: "①得救恩门到处开起，发出光辉照世界；\ndé jiù ēn mén dào chù kāi qǐ, fā chū guāng huī zhào shì jiè;\n十架舍命,无限荣耀,表明救主大仁爱。\nshí jià shě mìng wú xiàn róng yào,biǎo míng jiù zhǔ dà rén ài.\n(副歌)灵恩丰盛,至善、至美,此门希奇,到处开起；\nlíng ēn fēng shèng zhì shàn zhì měi,cǐ mén xī qí dào chù kāi qǐ;\n开起，开起，此门到处开起。\nkāi qǐ, kāi qǐ, cǐ mén dào chù kāi qǐ.\n\n②凡人进入就得永生,此门今开,快进来；\nfán rén jìn rù jiù dé yǒng shēng,cǐ mén jīn kāi kuài jìn lái;\n富贵、贫贱、老弱、少壮,万国、万民无偏待。\nfù guì pín jiàn lǎo ruò shào zhuàng, wàn guó wàn mín wú piān dài.\n(副歌)灵恩丰盛,至善、至美,此门希奇,到处开起；\nlíng ēn fēng shèng zhì shàn zhì měi,cǐ mén xī qí dào chù kāi qǐ;\n开起，开起，此门到处开起。\nkāi qǐ, kāi qǐ, cǐ mén dào chù kāi qǐ.\n\n③努力向前,不怕阻挡,快进此门,莫迟疑；\nnǔ lì xiàng qián bù pà zǔ dǎng,kuài jìn cǐ mén mò chí yí;\n因信称义,靠恩得救,救主大爱永不移。\nyīn xìn chēng yì kào ēn dé jiù, jiù zhǔ dà ài yǒng bù yí.\n(副歌)灵恩丰盛,至善、至美,此门希奇,到处开起；\nlíng ēn fēng shèng zhì shàn zhì měi,cǐ mén xī qí dào chù kāi qǐ;\n开起，开起，此门到处开起。\nkāi qǐ, kāi qǐ, cǐ mén dào chù kāi qǐ.\n\n④世人离主,如羊走迷,前途危险应自知；\nshì rén lí zhǔ rú yáng zǒu mí, qián tú wēi xiǎn yīng zì zhī;\n归主耶稣,进入恩门,永远得救正此时。\nguī zhǔ yē sū jìn rù ēn mén,yǒng yuǎn dé jiù zhèng cǐ shí.\n(副歌)灵恩丰盛,至善、至美,此门希奇,到处开起；\nlíng ēn fēng shèng zhì shàn zhì měi,cǐ mén xī qí dào chù kāi qǐ;\n开起，开起，此门到处开起。\nkāi qǐ, kāi qǐ, cǐ mén dào chù kāi qǐ。"
  }
             ];

        function renderList(data) {
            const list = document.getElementById('listView');
            list.innerHTML = '';
            data.forEach(h => {
                const div = document.createElement('div');
                div.className = "card p-5 rounded-2xl flex items-center";
                div.innerHTML = `<span class="hymn-id">${h.id}</span> <span class="flex-1">${h.title}</span>`;
                div.onclick = () => showHymn(h);
                list.appendChild(div);
            });
        }

        function filterHymns() {
            const query = document.getElementById('searchBar').value.toLowerCase().trim();
            if (query === "") { renderList(hymns); return; }

            let filtered = hymns.filter(h => 
                h.title.toLowerCase().includes(query) || h.id.toString() === query
            );

            // Jump to Top logic
            filtered.sort((a, b) => {
                if (a.id.toString() === query) return -1;
                if (b.id.toString() === query) return 1;
                return 0;
            });

            renderList(filtered);
        }

        function showHymn(h) {
            document.getElementById('hymnTitle').innerText = h.title;
            
            // Split by symbols ① ② ③ etc.
            currentHymnVerses = h.lyrics.split(/(?=①|②|③|④|⑤|⑥|⑦|⑧|⑨)/g).filter(v => v.trim() !== "");
            
            currentVerseIndex = 0;
            updateVerseDisplay();
            
            document.getElementById('detailView').classList.remove('hidden');
        }

        function updateVerseDisplay() {
            document.getElementById('hymnLyrics').innerText = currentHymnVerses[currentVerseIndex];
            document.getElementById('pageInfo').innerText = `Verse ${currentVerseIndex + 1} of ${currentHymnVerses.length}`;
            
            document.getElementById('prevBtn').disabled = (currentVerseIndex === 0);
            document.getElementById('nextBtn').disabled = (currentVerseIndex === currentHymnVerses.length - 1);
        }

        function changeVerse(dir) {
            currentVerseIndex += dir;
            updateVerseDisplay();
            document.getElementById('detailView').scrollTo(0, 0);
        }

        function goBack() {
            document.getElementById('detailView').classList.add('hidden');
        }

        renderList(hymns);
    </script>
</body>
</html>
