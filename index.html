<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hymnal App</title>
    
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="Hymnal">
    <meta name="theme-color" content="#0f172a">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Permanent Dark Theme */
        body { background-color: #0f172a; color: #f1f5f9; font-family: sans-serif; }
        #app { background-color: #0f172a; }
        
        /* List Cards */
        .card { 
            background-color: #1e293b; 
            border: 1px solid #334155; 
            color: #ffffff; 
            transition: all 0.2s;
        }
        .card:active { background-color: #334155; transform: scale(0.98); }
        .hymn-id { color: #818cf8; font-weight: bold; margin-right: 12px; }

        /* Paginated Verse View */
        .verse-container {
            min-height: 50vh;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            background: rgba(30, 41, 59, 0.5);
            border-radius: 20px;
            padding: 20px;
            margin: 20px 0;
            border: 1px solid #334155;
        }

        .lyrics-text { 
            white-space: pre-line; 
            font-family: 'Noto Serif SC', 'Georgia', serif; 
            line-height: 2.2; 
            font-size: 1.4rem;
            color: #ffffff !important;
            font-style: italic;
        }

        /* Navigation controls */
        .nav-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
        }

        .page-btn {
            background-color: #312e81;
            color: #e0e7ff;
            padding: 12px 24px;
            border-radius: 12px;
            font-weight: bold;
            border: 1px solid #4338ca;
        }
        
        .page-btn:disabled { opacity: 0.2; }

        .back-btn { color: #94a3b8; margin-bottom: 20px; display: block; }
        
        * { -webkit-tap-highlight-color: transparent; }
    </style>
</head>
<body>

    <div id="app" class="max-w-md mx-auto min-h-screen flex flex-col shadow-2xl">
        
        <header class="bg-indigo-950 text-white p-5 sticky top-0 z-20 shadow-xl border-b border-indigo-900">
            <h1 class="text-xl font-bold mb-4 text-indigo-200">True Jesus Church Hymnal</h1>
            <input type="text" id="searchBar" onkeyup="filterHymns()" placeholder="Search number or name..." 
                class="w-full p-4 rounded-xl bg-slate-900 text-white border border-slate-700 outline-none focus:ring-2 focus:ring-indigo-500 placeholder-slate-500">
        </header>

        <div id="listView" class="p-4 space-y-3">
            </div>

        <div id="detailView" class="hidden fixed inset-0 z-30 p-6 overflow-y-auto bg-slate-950">
            <button onclick="goBack()" class="back-btn text-lg">← Back to List</button>
            
            <h2 id="hymnTitle" class="text-center text-indigo-400 font-bold text-xl mb-4"></h2>
            
            <div class="verse-container">
                <div id="hymnLyrics" class="lyrics-text"></div>
            </div>

            <div class="nav-controls">
                <button id="prevBtn" class="page-btn" onclick="changeVerse(-1)">Previous</button>
                <span id="pageInfo" class="text-slate-500 text-sm">Verse 1 of 1</span>
                <button id="nextBtn" class="page-btn" onclick="changeVerse(1)">Next</button>
            </div>
            
            <div class="h-20"></div>
        </div>

    </div>

    <script>
        let currentHymnVerses = [];
        let currentVerseIndex = 0;

        // Your full hymn list (I included the first few, you can add all 310)
        const hymns = [
            { id: 1, title: "颂赞独一真神", lyrics: "①圣哉, 圣哉, 圣哉, 全能大主宰!\nshèng zài shèng zāi, shèng zāi, quán néng dà zhǔ zǎi!\n②圣哉, 圣哉, 圣哉, 群圣皆跪拜!\nshèng zāi shèng zāi, shèng zāi, qún shèng jiē guì bài!\n③圣哉,圣哉,圣哉,鸿恩遍宇内!\nshèng zai shèng zài, shèng zai, hóng en biàn yu nei!" },
            { id: 2, title: "赞美圣父", lyrics: "①哈利路亚, 赞美圣父! 阿们, 阿们, 哈利路亚!\nhā li lù yà, zàn měi shèng fù！a men, a men, hā li lù yà！\n②哈利路亚, 赞美耶稣! 阿们, 阿们, 哈利路亚!\nhā li lù yà, zàn měi yē sū！a men, a men, hā li lù yà！" },
            { id: 3, title: "赞美真神", lyrics: "①哈利路亚, 赞美真神! 哈利路亚, 阿们!\nhā li lù yà, zàn méi zhēn shén！hā li lù yà, ā men！\n②哈利路亚, 赞美耶稣! 哈利路亚, 阿们!\nhā li lù yà, zàn méi yē sū！hā li lù yà, ā men！" },
            { id: 4, title: "我心赞美天父", lyrics: "①我心赞美天父，尽心尽意，尽性尽力，赞祂极美圣名！\nwǒ xīn zàn měi tiān fù, jìn xīn jìn yì jìn xìng jìn lì, zàn tā jí měi shèng míng！" },
            { id: 310, title: "年终感颂", lyrics: "①光阴消逝如飞箭, 转瞬一年又告终\nguāng yīn xiāo shì rú fēi jiàn, zhuǎn shùn yī nián yòu gào zhōng\n②人生万事如捕风, 劳苦、叹息虚空中\nrén shēng wàn shì rú bǔ fēng, lao ku tan xi xu kong zhong" }
        ];

        function renderList(data) {
            const list = document.getElementById('listView');
            list.innerHTML = '';
            data.forEach(h => {
                const div = document.createElement('div');
                div.className = "card p-5 rounded-2xl flex items-center";
                div.innerHTML = `<span class="hymn-id">${h.id}</span> <span class="flex-1">${h.title}</span>`;
                div.onclick = () => showHymn(h);
                list.appendChild(div);
            });
        }

        function filterHymns() {
            const query = document.getElementById('searchBar').value.toLowerCase().trim();
            if (query === "") { renderList(hymns); return; }

            let filtered = hymns.filter(h => 
                h.title.toLowerCase().includes(query) || h.id.toString() === query
            );

            // Jump to Top logic
            filtered.sort((a, b) => {
                if (a.id.toString() === query) return -1;
                if (b.id.toString() === query) return 1;
                return 0;
            });

            renderList(filtered);
        }

        function showHymn(h) {
            document.getElementById('hymnTitle').innerText = h.title;
            
            // Split by symbols ① ② ③ etc.
            currentHymnVerses = h.lyrics.split(/(?=①|②|③|④|⑤|⑥|⑦|⑧|⑨)/g).filter(v => v.trim() !== "");
            
            currentVerseIndex = 0;
            updateVerseDisplay();
            
            document.getElementById('detailView').classList.remove('hidden');
        }

        function updateVerseDisplay() {
            document.getElementById('hymnLyrics').innerText = currentHymnVerses[currentVerseIndex];
            document.getElementById('pageInfo').innerText = `Verse ${currentVerseIndex + 1} of ${currentHymnVerses.length}`;
            
            document.getElementById('prevBtn').disabled = (currentVerseIndex === 0);
            document.getElementById('nextBtn').disabled = (currentVerseIndex === currentHymnVerses.length - 1);
        }

        function changeVerse(dir) {
            currentVerseIndex += dir;
            updateVerseDisplay();
            document.getElementById('detailView').scrollTo(0, 0);
        }

        function goBack() {
            document.getElementById('detailView').classList.add('hidden');
        }

        renderList(hymns);
    </script>
</body>
</html>
