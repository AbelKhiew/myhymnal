<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hymnal App</title>
    
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="Hymnal">
    <meta name="theme-color" content="#4f46e5">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .lyrics-text { white-space: pre-line; font-family: 'Georgia', serif; }
        .dark-mode { background-color: #111827; color: #f3f4f6; }
        .dark-mode .card { background-color: #1f2937; border-color: #374151; color: white; }
        .dark-mode .back-btn { color: #818cf8; }
        .dark-mode #detailView { background-color: #111827; }
    </style>
</head>
<body id="body-tag" class="bg-gray-100 transition-colors duration-200">

    <div id="app" class="max-w-md mx-auto min-h-screen flex flex-col shadow-2xl bg-white dark:bg-gray-900">
        
        <header class="bg-indigo-700 text-white p-5 sticky top-0 z-20 shadow-lg">
            <div class="flex justify-between items-center mb-4">
                <h1 class="text-2xl font-bold tracking-tight">Hymnal</h1>
                <button onclick="toggleDarkMode()" class="p-2 bg-indigo-800 rounded-full hover:bg-indigo-600 transition">
                    üåô
                </button>
            </div>
            <input type="text" id="searchBar" onkeyup="filterHymns()" placeholder="Type hymn number or name..." 
                class="w-full p-3 rounded-lg text-gray-900 focus:ring-4 focus:ring-indigo-300 outline-none shadow-inner">
        </header>

        <div id="listView" class="p-4 space-y-3 overflow-y-auto">
            </div>

        <div id="detailView" class="hidden fixed inset-0 bg-white z-30 p-6 overflow-y-auto">
            <button onclick="goBack()" class="back-btn text-indigo-600 font-bold mb-6 flex items-center text-lg">
                ‚Üê Back to List
            </button>
            <h2 id="hymnTitle" class="text-3xl font-bold mb-4 border-b pb-4 leading-tight"></h2>
            <div id="hymnLyrics" class="lyrics-text text-xl leading-relaxed italic text-gray-800 dark:text-gray-200"></div>
            <div class="h-20"></div>
        </div>

    </div>

    <script>
        const hymns = [
            { id: 1, title: "Amazing Grace", lyrics: "Amazing grace! How sweet the sound\nThat saved a wretch like me!" },
            { id: 2, title: "How Great Thou Art", lyrics: "O Lord, my God, when I in awesome wonder\nConsider all the worlds Thy hands have made" },
            { id: 3, title: "Great Is Thy Faithfulness", lyrics: "Great is Thy faithfulness, O God my Father\nThere is no shadow of turning with Thee" },
            { id: 4, title: "It Is Well With My Soul", lyrics: "When peace like a river attendeth my way\nWhen sorrows like sea billows roll" },
            { id: 5, title: "In Christ Alone", lyrics: "In Christ alone my hope is found\nHe is my light, my strength, my song" },
            { id: 6, title: "Blessed Assurance", lyrics: "Blessed assurance, Jesus is mine!\nO what a foretaste of glory divine!" },
            { id: 7, title: "Rock of Ages", lyrics: "Rock of Ages, cleft for me,\nLet me hide myself in Thee" },
            { id: 8, title: "Holy, Holy, Holy", lyrics: "Holy, holy, holy! Lord God Almighty!\nEarly in the morning our song shall rise to Thee" },
            { id: 9, title: "Abide With Me", lyrics: "Abide with me; fast falls the eventide;\nThe darkness deepens; Lord, with me abide" },
            { id: 10, title: "The Old Rugged Cross", lyrics: "On a hill far away stood an old rugged cross,\nThe emblem of suffering and shame" }
        ];

        function renderList(data) {
            const list = document.getElementById('listView');
            list.innerHTML = '';
            data.forEach(h => {
                const div = document.createElement('div');
                div.className = "card p-4 bg-white rounded-xl shadow-sm border border-gray-200 cursor-pointer active:bg-indigo-50 transition";
                div.innerHTML = `<span class="font-bold text-indigo-600 mr-3 text-lg">${h.id}</span> ${h.title}`;
                div.onclick = () => showHymn(h);
                list.appendChild(div);
            });
        }

        function filterHymns() {
            const query = document.getElementById('searchBar').value.toLowerCase().trim();
            
            if (query === "") {
                renderList(hymns);
                return;
            }

            // Filter logic
            let filtered = hymns.filter(h => 
                h.title.toLowerCase().includes(query) || h.id.toString() === query
            );

            // Sort logic: If the ID matches exactly, put it at the very top
            filtered.sort((a, b) => {
                if (a.id.toString() === query) return -1;
                if (b.id.toString() === query) return 1;
                return 0;
            });

            renderList(filtered);
        }

        function showHymn(h) {
            document.getElementById('hymnTitle').innerText = h.id + ". " + h.title;
            document.getElementById('hymnLyrics').innerText = h.lyrics;
            document.getElementById('detailView').classList.remove('hidden');
            window.scrollTo(0, 0);
        }

        function goBack() {
            document.getElementById('detailView').classList.add('hidden');
            document.getElementById('searchBar').value = ''; // Clears search when you go back
            renderList(hymns);
        }

        function toggleDarkMode() {
            document.getElementById('body-tag').classList.toggle('dark-mode');
        }

        // Load list on start
        renderList(hymns);
    </script>
</body>
</html>
